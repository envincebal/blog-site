<%- include("partials/header") -%>
<a href="/compose" class="post-link"><button type="button" class="new-entry btn btn-dark">New Entry</button></a>

<div class="entries-container">
  <% posts.forEach(post => { %>

  <div class="blog-entry">
    Posted on <span class="post-date">
      <%= post.date %>
    </span>
    <% if(post.title.length > 37) { %>
    <h3>
      <%= post.title.substring(0, 37) + "..." %>
    </h3>
    <% } else { %>
    <h3>
      <%= post.title %>
    </h3>
    <% } %>
    <div class="entry-footer">
      <a href="/posts/<%= post._id %>" class="post-link">
        <button type="button" class="btn btn-outline-primary">VIEW</button>
      </a>

      <a href="/edit/<%= post._id %>" class="post-link">
        <button type="button" name="edit" value="<%= post.title %>" class="btn btn-outline-secondary">EDIT</button>
      </a>

      <form action="/delete?page=<%= currentPage %>" method="POST">
        <button type="submit" name="delete" value="<%= post._id %>" class="btn btn-outline-danger">DELETE</button>
      </form>
    </div>
  </div>
  <% }) %>
  <div class="page-buttons">
    <% if(totalItems > 3){ %>
    <a href="/?page=<%= currentPage - 1 %>">
      <button type="submit" class="btn btn-outline-info newer-posts">Next</button>
    </a>
    <a href="/?page=<%= currentPage + 1 %>">
    <button type="submit" class="btn btn-outline-info older-posts">Previous</button>
    </a>

    <% } %>
  </div>

  <%- include("partials/footer") -%>